<!-- 1. [Приведедие типов при наследовании](#приведедие-типов-при-наследовании)
    - [Каст от потомка к родителю](#каст-от-потомка-к-родителю)
    - [Каст от родителя к потомку](#каст-от-родителя-к-потомку)
    - [Empty base optimization](#empty-base-optimization) -->

# Полиморфизм и виртуальные функции

Виртуальная функция в C++ – это функция-член в базовом классе, которую мы ожидаем переопределить в производных классах. Виртуальную функцию в C++ используют в базовом классе, чтобы гарантировать, что функция переопределена. Это относится к случаям, когда указатель базового класса указывает на объект производного класса.

```C++
#include <iostream>

struct Base {
    virtual void v()  { std::cout << "Base virtual\n"; }
            void nv() { std::cout << "Base not virtual\n"; }
};

struct Derived : public Base {
    void v()  { std::cout << "Derived virtual\n"; }
    void nv() { std::cout << "Derived not virtual\n"; }
};

int main() {
    Derived d;

    Base  b = d;  // создается новый объект неявным приведением 
    Base& bp = d; // указатель базового класса указывает на объект производного класса

    bb.v();
    bb.nv();

    d.v();
    b.v();

    d.nv();
    b.nv();
}
```

# Совмещение виртуальных и невиртуальных функций

grandChild

```C++
#include <iostream>

struct Base {
    void same(int) { std::cout << "Base same\n"; }
    void diff(int) { std::cout << "Base diff\n"; }

    virtual void same_v(int) { std::cout << "Base same_v\n"; }
    virtual void diff_v(int) { std::cout << "Base diff_v\n"; }
};

struct Derived : public Base {
    void same(int)    { std::cout << "Derived same\n"; }
    void diff(double) { std::cout << "Derived diff\n"; }

    void same_v(int)    { std::cout << "Derived same_v\n"; }
    void diff_v(double) { std::cout << "Derived diff_v\n"; }
};

struct GrandChild: public Derived {
};

int main() {
    GrandChild g;
    Base& b = g;

    b.same(0.0);   // "Base same" - функция не виртуальная, вызывается метод Base
    b.diff(0.0);   // "Base diff" - функция не виртуальная, вызывается метод Base

    b.same_v(0.0); // "Derived same_v" - функция виртуальная, вызывается метод Derived
    b.diff_v(0.0); // "Base diff_v" - функция хоть и виртуальная, но сигнатура с
                   // diff_v класса Derived не совпадает и следовательно перегрузки
                   // не происходит
}
```

47:00

# Ключевое слово override

51