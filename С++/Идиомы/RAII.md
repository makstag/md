#raii

Объекты классов могут на протяжении всего своего существования использовать различные ресурсы - динамически выделенная память, файлы, сетевые подключения и т.д. В этом случае в C++ применяется так называемый принцип/идиома RAII (resource acquisition is initialization). RAII предполагает, что получение ресурса производится при инициализации объекта. А освобождение ресурса производится в деструкторе объекта. На этой идее построены стандартные контейнеры и так называемые «умные указатели» — классы `unique_ptr` и `shared_ptr` из стандартной библиотеки.

>Для файловых дескрипторов в стандартной библиотеке уже есть готовая обёртка  в стиле `RAII` - `std::fstream`, которая позволяет работать с файлами как с потоками ввода-вывода.

Название идиомы, как замечает сам Бьёрн Страуструп, выбрано неудачно. Лучше отражают её смысл альтернативные названия:

- CADR (Constructor Acquires, Destructor Releases) — в конструкторе захватываем ресурс, в деструкторе — освобождаем;
- SBRM (Scope-Bound Resource Management) — управление ресурсами с привязкой к области видимости.

```C++
#include <iostream>

void g(int y) {
	if (y == 0) {
		throw 1;
	}
}

void f(int x) {
	int* p = new int(x);
	g(*p); // exeption, освобождение памяти p не произойдет
	delete p;
}

int main() {
	f(5);
}
```